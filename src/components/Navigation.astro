---
// @ts-expect-error
import { site } from "../data.yaml";
import svgReference from '/favicon.svg';

interface Link {
	text: string;
	href: string;
};
interface Props {
	title?: string;
	icon?: string;
	links?: Link[];
};
const {title = "Conshelv", icon = svgReference , links = [] } = Astro.props;
---
<script>
	class NavSwitcher extends HTMLElement {
		switchNav() {
			const hidden = this.querySelectorAll('ul')[1];
			const title = this.querySelector('h1');

			hidden?.classList.toggle("hidden");
			this.classList.toggle("bg-accent");
			this.classList.toggle("text-primary-content");
			title?.classList.toggle("font-bold");
			title?.classList.toggle("text-accent");
			title?.classList.toggle("text-primary-content");
			this.isSwitched = !this.isSwitched;
		}
		isSwitched = false;

		constructor() {
			super();

			const button = this.querySelector('button');
			button?.addEventListener(
				'click',
				() => {this.switchNav();}
			);

			addEventListener("resize", (event) =>{
			if (this.isSwitched)	{
				this.switchNav();
			}
			});

		}
	}

	customElements.define('nav-switcher',NavSwitcher)
</script>
<!--DERIVED FROM MAMBA UI -->
<nav class="bg-transparent w-full">
	<nav-switcher class="flex flex-col pt-2 p-4 max-md:px-8">
	<div class="container flex justify-between h-16 mx-auto">
		<a rel="noopener noreferrer" href="#" aria-label="Back to homepage" class="flex items-center p-2 place-items-center">
			<object class="w-full h-full" data={icon} type="image/svg+xml" />
			<h1 class="ml-4 pt-2 text-4xl text-accent font-bold">{title}</h1>
		</a>
		<ul class="items-stretch hidden space-x-3 md:flex">
			<li class="flex">
				{links.map(({text, href}) => (
					<a rel="noopener noreferrer" href={href} class="flex items-center px-4 -mb-1 border-b-2 border-solid text-primary-content text-lg border-transparent hover:border-primary-content" set:html={text}></a>
				))}
			</li>
		</ul>

		<button class="flex justify-end p-4 md:hidden text-primary-content">
			<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-6 h-6">
				<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
			</svg>
		</button>
	</div>
	<ul class="items-stretch hidden space-x-3 md:hidden">
		<li class="flex flex-col justify-center place-items-center">
			<div class="mb-4"></div>
			{links.map(({text, href}) => (
				<a rel="noopener noreferrer" href={href} class="flex items-center py-2 border-b-2 dark:border-transparent text-primary-content hover:underline" set:html={text}></a>
			))}
		</li>
	</ul>
</nav-switcher>
</nav>

